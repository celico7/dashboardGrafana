{"version":3,"sources":["sidebar.js"],"names":["DynamicSidebar","sidebarSelector","mainContentSelector","toggleButtonId","storageKey","sidebar","document","querySelector","mainContent","toggleButton","isCollapsed","loadState","init","createToggleButton","classList","add","collapse","addEventListener","toggle","buttonId","createElement","id","className","setAttribute","updateIcon","insertBefore","firstChild","expand","saveState","enabled","value","style","transition","offsetHeight","animate","setTransitions","remove","innerHTML","localStorage","setItem","e","console","warn","saved","getItem"],"mappings":";;;;;;;;IAAMA,c;;;AACF,0BAAYC,eAAZ,EAA6BC,mBAA7B,EAAkDC,cAAlD,EAAkEC,UAAlE,EAA8E;AAAA;;AAC1E,SAAKC,OAAL,GAAeC,QAAQ,CAACC,aAAT,CAAuBN,eAAvB,CAAf;AACA,SAAKO,WAAL,GAAmBF,QAAQ,CAACC,aAAT,CAAuBL,mBAAvB,CAAnB;AACA,SAAKO,YAAL,GAAoB,IAApB;AACA,SAAKL,UAAL,GAAkBA,UAAlB;AACA,SAAKM,WAAL,GAAmB,KAAKC,SAAL,EAAnB;AAEA,SAAKC,IAAL,CAAUT,cAAV;AACH;;;;yBAEIA,c,EAAgB;AAAA;;AACjB;AACA,WAAKU,kBAAL,CAAwBV,cAAxB,EAFiB,CAIjB;;AACA,WAAKE,OAAL,CAAaS,SAAb,CAAuBC,GAAvB,CAA2B,iBAA3B;AACA,WAAKP,WAAL,CAAiBM,SAAjB,CAA2BC,GAA3B,CAA+B,sBAA/B,EANiB,CAQjB;;AACA,UAAI,KAAKL,WAAT,EAAsB;AAClB,aAAKM,QAAL,CAAc,KAAd;AACH,OAXgB,CAajB;;;AACA,WAAKP,YAAL,CAAkBQ,gBAAlB,CAAmC,OAAnC,EAA4C;AAAA,eAAM,KAAI,CAACC,MAAL,EAAN;AAAA,OAA5C;AACH;;;uCAEkBC,Q,EAAU;AACzB;AACA,WAAKV,YAAL,GAAoBH,QAAQ,CAACc,aAAT,CAAuB,QAAvB,CAApB;AACA,WAAKX,YAAL,CAAkBY,EAAlB,GAAuBF,QAAvB;AACA,WAAKV,YAAL,CAAkBa,SAAlB,GAA8B,oBAA9B;AACA,WAAKb,YAAL,CAAkBc,YAAlB,CAA+B,YAA/B,EAA6C,qBAA7C;AAEA,WAAKC,UAAL,GAPyB,CASzB;;AACA,WAAKhB,WAAL,CAAiBiB,YAAjB,CAA8B,KAAKhB,YAAnC,EAAiD,KAAKD,WAAL,CAAiBkB,UAAlE;AACH;;;6BAEQ;AACL,WAAKhB,WAAL,GAAmB,CAAC,KAAKA,WAAzB;;AAEA,UAAI,KAAKA,WAAT,EAAsB;AAClB,aAAKM,QAAL,CAAc,IAAd;AACH,OAFD,MAEO;AACH,aAAKW,MAAL,CAAY,IAAZ;AACH,OAPI,CASL;;;AACA,WAAKC,SAAL,GAVK,CAYL;;AACA,WAAKJ,UAAL;AACH;;;mCAEcK,O,EAAS;AACpB,UAAMC,KAAK,GAAGD,OAAO,GAAG,EAAH,GAAQ,MAA7B;AACA,WAAKxB,OAAL,CAAa0B,KAAb,CAAmBC,UAAnB,GAAgCF,KAAhC;AACA,WAAKtB,WAAL,CAAiBuB,KAAjB,CAAuBC,UAAvB,GAAoCF,KAApC;;AACA,UAAI,CAACD,OAAL,EAAc;AACV,aAAKxB,OAAL,CAAa4B,YAAb;AACH;AACJ;;;+BAEwB;AAAA,UAAhBC,OAAgB,uEAAN,IAAM;AACrB,UAAI,CAACA,OAAL,EAAc,KAAKC,cAAL,CAAoB,KAApB;AAEd,WAAK9B,OAAL,CAAaS,SAAb,CAAuBC,GAAvB,CAA2B,WAA3B;AACA,WAAKP,WAAL,CAAiBM,SAAjB,CAA2BC,GAA3B,CAA+B,UAA/B;AACA,WAAKN,YAAL,CAAkBK,SAAlB,CAA4BC,GAA5B,CAAgC,mBAAhC;AAEA,UAAI,CAACmB,OAAL,EAAc,KAAKC,cAAL,CAAoB,IAApB;AACjB;;;6BAEsB;AAAA,UAAhBD,OAAgB,uEAAN,IAAM;AACnB,UAAI,CAACA,OAAL,EAAc,KAAKC,cAAL,CAAoB,KAApB;AAEd,WAAK9B,OAAL,CAAaS,SAAb,CAAuBsB,MAAvB,CAA8B,WAA9B;AACA,WAAK5B,WAAL,CAAiBM,SAAjB,CAA2BsB,MAA3B,CAAkC,UAAlC;AACA,WAAK3B,YAAL,CAAkBK,SAAlB,CAA4BsB,MAA5B,CAAmC,mBAAnC;AAEA,UAAI,CAACF,OAAL,EAAc,KAAKC,cAAL,CAAoB,IAApB;AACjB;;;iCAEY;AACT,UAAI,KAAKzB,WAAT,EAAsB;AAClB;AACA,aAAKD,YAAL,CAAkB4B,SAAlB;AAKH,OAPD,MAOO;AACH;AACA,aAAK5B,YAAL,CAAkB4B,SAAlB;AAOH;AACJ;;;gCAEW;AACR,UAAI;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,KAAKnC,UAA1B,EAAsC,KAAKM,WAAL,GAAmB,MAAnB,GAA4B,OAAlE;AACH,OAFD,CAEE,OAAO8B,CAAP,EAAU;AACRC,QAAAA,OAAO,CAACC,IAAR,CAAa,2CAAb,EAA0DF,CAA1D;AACH;AACJ;;;gCAEW;AACR,UAAI;AACA,YAAMG,KAAK,GAAGL,YAAY,CAACM,OAAb,CAAqB,KAAKxC,UAA1B,CAAd;AACA,eAAOuC,KAAK,KAAK,MAAjB;AACH,OAHD,CAGE,OAAOH,CAAP,EAAU;AACRC,QAAAA,OAAO,CAACC,IAAR,CAAa,6CAAb,EAA4DF,CAA5D;AACA,eAAO,KAAP;AACH;AACJ;;;;KAGL;;;AACAlC,QAAQ,CAACW,gBAAT,CAA0B,kBAA1B,EAA8C,YAAW;AACrD;AACA,MAAIX,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAJ,EAAwC;AACpC,QAAIP,cAAJ,CAAmB,UAAnB,EAA+B,eAA/B,EAAgD,sBAAhD,EAAwE,qBAAxE;AACH,GAJoD,CAMrD;;;AACA,MAAIM,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAJ,EAA6C;AACzC,QAAIP,cAAJ,CAAmB,eAAnB,EAAoC,oBAApC,EAA0D,qBAA1D,EAAiF,oBAAjF;AACH;AACJ,CAVD","sourcesContent":["class DynamicSidebar {\n    constructor(sidebarSelector, mainContentSelector, toggleButtonId, storageKey) {\n        this.sidebar = document.querySelector(sidebarSelector);\n        this.mainContent = document.querySelector(mainContentSelector);\n        this.toggleButton = null;\n        this.storageKey = storageKey;\n        this.isCollapsed = this.loadState();\n\n        this.init(toggleButtonId);\n    }\n\n    init(toggleButtonId) {\n        // Créer le bouton toggle\n        this.createToggleButton(toggleButtonId);\n\n        // Ajouter les classes nécessaires\n        this.sidebar.classList.add('sidebar-dynamic');\n        this.mainContent.classList.add('main-content-dynamic');\n\n        // Appliquer l'état initial\n        if (this.isCollapsed) {\n            this.collapse(false);\n        }\n\n        // Ajouter l'event listener\n        this.toggleButton.addEventListener('click', () => this.toggle());\n    }\n\n    createToggleButton(buttonId) {\n        // Créer le bouton\n        this.toggleButton = document.createElement('button');\n        this.toggleButton.id = buttonId;\n        this.toggleButton.className = 'sidebar-toggle-btn';\n        this.toggleButton.setAttribute('aria-label', 'Basculer la sidebar');\n\n        this.updateIcon();\n\n        // Ajouter au DOM - dans le main content en haut à gauche\n        this.mainContent.insertBefore(this.toggleButton, this.mainContent.firstChild);\n    }\n\n    toggle() {\n        this.isCollapsed = !this.isCollapsed;\n\n        if (this.isCollapsed) {\n            this.collapse(true);\n        } else {\n            this.expand(true);\n        }\n\n        // Sauvegarder l'état\n        this.saveState();\n\n        // Changer l'icône\n        this.updateIcon();\n    }\n\n    setTransitions(enabled) {\n        const value = enabled ? '' : 'none';\n        this.sidebar.style.transition = value;\n        this.mainContent.style.transition = value;\n        if (!enabled) {\n            this.sidebar.offsetHeight; \n        }\n    }\n\n    collapse(animate = true) {\n        if (!animate) this.setTransitions(false);\n\n        this.sidebar.classList.add('collapsed');\n        this.mainContent.classList.add('expanded');\n        this.toggleButton.classList.add('sidebar-collapsed');\n\n        if (!animate) this.setTransitions(true);\n    }\n\n    expand(animate = true) {\n        if (!animate) this.setTransitions(false);\n\n        this.sidebar.classList.remove('collapsed');\n        this.mainContent.classList.remove('expanded');\n        this.toggleButton.classList.remove('sidebar-collapsed');\n\n        if (!animate) this.setTransitions(true);\n    }\n\n    updateIcon() {\n        if (this.isCollapsed) {\n            // Icône pour ouvrir (flèche droite)\n            this.toggleButton.innerHTML = `\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                    <polyline points=\"9 18 15 12 9 6\"></polyline>\n                </svg>\n            `;\n        } else {\n            // Icône hamburger\n            this.toggleButton.innerHTML = `\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                    <line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\"></line>\n                    <line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\"></line>\n                    <line x1=\"3\" y1=\"18\" x2=\"21\" y2=\"18\"></line>\n                </svg>\n            `;\n        }\n    }\n\n    saveState() {\n        try {\n            localStorage.setItem(this.storageKey, this.isCollapsed ? 'true' : 'false');\n        } catch (e) {\n            console.warn('Cannot save sidebar state to localStorage', e);\n        }\n    }\n\n    loadState() {\n        try {\n            const saved = localStorage.getItem(this.storageKey);\n            return saved === 'true';\n        } catch (e) {\n            console.warn('Cannot load sidebar state from localStorage', e);\n            return false;\n        }\n    }\n}\n\n// Initialisation automatique au chargement de la page\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Pour la page élève\n    if (document.querySelector('.sidebar')) {\n        new DynamicSidebar('.sidebar', '.main-content', 'sidebar-toggle-eleve', 'sidebar-state-eleve');\n    }\n\n    // Pour la page prof\n    if (document.querySelector('.prof-sidebar')) {\n        new DynamicSidebar('.prof-sidebar', '.prof-main-content', 'sidebar-toggle-prof', 'sidebar-state-prof');\n    }\n});\n"],"file":"sidebar.dev.js"}