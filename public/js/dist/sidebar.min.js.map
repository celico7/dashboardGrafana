{"version":3,"sources":["sidebar.js"],"names":["DynamicSidebar","sidebarSelector","mainContentSelector","toggleButtonId","storageKey","_classCallCheck","this","sidebar","document","querySelector","mainContent","toggleButton","isCollapsed","loadState","_this","createToggleButton","classList","add","collapse","addEventListener","toggle","createElement","className","setAttribute","updateIcon","firstChild","id","saveState","value","enabled","transition","style","expand","offsetHeight","arguments","length","undefined","animate","setTransitions","remove","localStorage","setItem","console","warn","e"],"mappings":"uZAAMA,0BACF,SAAAA,EAAYC,EAAiBC,EAAqBC,EAAgBC,GAAYC,gBAAAC,KAAAN,GAC1EM,KAAKC,QAAUC,SAASC,cAAcR,GACtCK,KAAKI,YAAcF,SAASC,cAAcP,GAC1CI,KAAKK,aAAe,KACpBL,KAAKF,WAAaA,EAClBE,KAAKM,YAAcN,KAAKO,YAN1Bb,KAAAA,KAQYG,qDAPdA,GAAA,IAAAW,EAAAR,KAYIA,KAAKS,mBAAmBZ,GATxBG,KAAKK,QAALK,UAAAC,IAAA,mBACAX,KAAKF,YAAaA,UAAlBa,IAAA,wBAIHX,KAAAM,aAYON,KAAKY,UAAS,GAVDZ,KAAAK,aAAAQ,iBAAA,QAAA,WAAA,OAAAL,EAAAM,sDAEZL,GAGLT,KAAKC,aAALC,SAA2Ba,cAA3B,UACAf,KAAKI,aAAYM,GAAAA,EAejBV,KAAKK,aAAaW,UAAY,qBAZ9BhB,KAAIK,aAAJY,aAAsB,aAAA,uBAItBjB,KAAAkB,aACAlB,KAAKK,YAAaQ,aAAAA,KAAiBR,aAASL,KAAAI,YAAAe,6CAiB5CnB,KAAKM,aAAeN,KAAKM,YAErBN,KAAKM,YAfTN,KAAAY,UAAA,GAEKP,KAAAA,QAAae,GAoBlBpB,KAAKqB,YAGLrB,KAAKkB,oDAZAZ,GAgBL,IAAMgB,EAAQC,EAAU,GAAK,OAd7BvB,KAAIC,QAAKK,MAATkB,WAAsBF,EAClBtB,KAAKY,YAASa,MAAdD,WAAAF,EACGC,GACHvB,KAAK0B,QAALC,iDAMJ,IAFKN,IAEL,EAAAO,UAAAC,aAAAC,UAcKC,GAAS/B,KAAKgC,gBAAe,GAZrChC,KAAAC,QAAAS,UAAAC,IAAA,aAeGX,KAAKI,YAAYM,UAAUC,IAAI,YAC/BX,KAAKK,aAAaK,UAAUC,IAAI,qBAb1BW,GAAQC,KAAOS,gBAArB,qCAkBmB,IAAhBD,IAAgB,EAAAH,UAAAC,aAAAC,UAfdP,GAASvB,KAAAgC,gBAAA,GAEbhC,KAAAC,QAAAS,UAAAuB,OAAA,aACJjC,KAAAI,YAAAM,UAAAuB,OAAA,YAiBGjC,KAAKK,aAAaK,UAAUuB,OAAO,qBAE9BF,GAAS/B,KAAKgC,gBAjBE,wCAIhB5B,KAAAA,YAGA2B,KAAAA,aAAcC,UAAdD,0MAMA9B,KAAAA,aAAkBgC,UAAlBhC,+WAQL,IAQIiC,aAAAC,QAAAnC,KAAAF,WAAAE,KAAAM,YAAA,OAAA,SACA,MAAKD,GAOR+B,QAAAC,KAAA,4CAAAC,wCAID,IAEE,MAAU,SADKH,aAAarC,QAAYE,KAAKM,YAE3C8B,MAAQC,GAEf,OADID,QAAAC,KAAA,8CAAAC,IACJ,YAKOpC,SAAAW,iBAAiB,mBAAjB,WAEAuB,SAAQC,cAAK,aACb,IAAA3C,eAAA,WAAA,gBAAA,uBAAA,uBAaJQ,SAASC,cAAc,kBACvB,IAAIT,eAAe,gBAAiB,qBAAsB,sBAAuB","file":"sidebar.min.js","sourcesContent":["class DynamicSidebar {\n    constructor(sidebarSelector, mainContentSelector, toggleButtonId, storageKey) {\n        this.sidebar = document.querySelector(sidebarSelector);\n        this.mainContent = document.querySelector(mainContentSelector);\n        this.toggleButton = null;\n        this.storageKey = storageKey;\n        this.isCollapsed = this.loadState();\n\n        this.init(toggleButtonId);\n    }\n\n    init(toggleButtonId) {\n        // Créer le bouton toggle\n        this.createToggleButton(toggleButtonId);\n\n        // Ajouter les classes nécessaires\n        this.sidebar.classList.add('sidebar-dynamic');\n        this.mainContent.classList.add('main-content-dynamic');\n\n        // Appliquer l'état initial\n        if (this.isCollapsed) {\n            this.collapse(false);\n        }\n\n        // Ajouter l'event listener\n        this.toggleButton.addEventListener('click', () => this.toggle());\n    }\n\n    createToggleButton(buttonId) {\n        // Créer le bouton\n        this.toggleButton = document.createElement('button');\n        this.toggleButton.id = buttonId;\n        this.toggleButton.className = 'sidebar-toggle-btn';\n        this.toggleButton.setAttribute('aria-label', 'Basculer la sidebar');\n\n        this.updateIcon();\n\n        // Ajouter au DOM - dans le main content en haut à gauche\n        this.mainContent.insertBefore(this.toggleButton, this.mainContent.firstChild);\n    }\n\n    toggle() {\n        this.isCollapsed = !this.isCollapsed;\n\n        if (this.isCollapsed) {\n            this.collapse(true);\n        } else {\n            this.expand(true);\n        }\n\n        // Sauvegarder l'état\n        this.saveState();\n\n        // Changer l'icône\n        this.updateIcon();\n    }\n\n    setTransitions(enabled) {\n        const value = enabled ? '' : 'none';\n        this.sidebar.style.transition = value;\n        this.mainContent.style.transition = value;\n        if (!enabled) {\n            this.sidebar.offsetHeight; \n        }\n    }\n\n    collapse(animate = true) {\n        if (!animate) this.setTransitions(false);\n\n        this.sidebar.classList.add('collapsed');\n        this.mainContent.classList.add('expanded');\n        this.toggleButton.classList.add('sidebar-collapsed');\n\n        if (!animate) this.setTransitions(true);\n    }\n\n    expand(animate = true) {\n        if (!animate) this.setTransitions(false);\n\n        this.sidebar.classList.remove('collapsed');\n        this.mainContent.classList.remove('expanded');\n        this.toggleButton.classList.remove('sidebar-collapsed');\n\n        if (!animate) this.setTransitions(true);\n    }\n\n    updateIcon() {\n        if (this.isCollapsed) {\n            // Icône pour ouvrir (flèche droite)\n            this.toggleButton.innerHTML = `\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                    <polyline points=\"9 18 15 12 9 6\"></polyline>\n                </svg>\n            `;\n        } else {\n            // Icône hamburger\n            this.toggleButton.innerHTML = `\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                    <line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\"></line>\n                    <line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\"></line>\n                    <line x1=\"3\" y1=\"18\" x2=\"21\" y2=\"18\"></line>\n                </svg>\n            `;\n        }\n    }\n\n    saveState() {\n        try {\n            localStorage.setItem(this.storageKey, this.isCollapsed ? 'true' : 'false');\n        } catch (e) {\n            console.warn('Cannot save sidebar state to localStorage', e);\n        }\n    }\n\n    loadState() {\n        try {\n            const saved = localStorage.getItem(this.storageKey);\n            return saved === 'true';\n        } catch (e) {\n            console.warn('Cannot load sidebar state from localStorage', e);\n            return false;\n        }\n    }\n}\n\n// Initialisation automatique au chargement de la page\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Pour la page élève\n    if (document.querySelector('.sidebar')) {\n        new DynamicSidebar('.sidebar', '.main-content', 'sidebar-toggle-eleve', 'sidebar-state-eleve');\n    }\n\n    // Pour la page prof\n    if (document.querySelector('.prof-sidebar')) {\n        new DynamicSidebar('.prof-sidebar', '.prof-main-content', 'sidebar-toggle-prof', 'sidebar-state-prof');\n    }\n});\n"]}